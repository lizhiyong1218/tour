<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lzy.tour.dao.RouteDetailMapper" >
  <resultMap id="BaseResultMap" type="routeDetail" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <id column="route_id" property="routeId" jdbcType="INTEGER" />
    <result column="route_status" property="routeStatus" jdbcType="VARCHAR" />
    <result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
    <result column="end_time" property="endTime" jdbcType="TIMESTAMP" />
  </resultMap>
  
  <sql id="Base_Column_List" >
    id, route_id, route_status,start_time, end_time
  </sql>
  
  <sql id="table_name">
  	t_route_detail
  </sql>
  
  <sql id="pageModelwhere">
  </sql>
  
 <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from <include refid="table_name" />
    where id = #{id,jdbcType=INTEGER}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from <include refid="table_name" />
    where id = #{id,jdbcType=INTEGER}
  </delete>
  
  
  <select id="getAll" parameterType="map" resultMap="BaseResultMap">
  	select <include refid="Base_Column_List" />
  	from <include refid="table_name" />  
  	<where>
	<include refid="pageModelwhere" />
	</where>
	<if test="limit != null">
		limit #{limit}
	</if>	
  </select>
  
  <select id="getRouteAllInfoList" parameterType="map"  resultType="RouteDetail">
  	select 
  		routeDetail.id id,
  		routeDetail.route_id routeId,
  		routeDetail.route_status routeStatus,
  		routeDetail.start_time startTime,
  		routeDetail.end_time endTime,
  		route.id route.id,
  		route.title route.title,
  		route.pic_url route.picUrl
	from  t_route_detail routeDetail inner join t_route route on routeDetail.route_id=route.id
  	<where>
		route.status='ENABLED'
		<if test="routeType != null" >
			and route.routeType=#{routeType}
		</if>
	</where>
	<if test="limit != null">
		limit #{limit}
	</if>
  </select>
  
  <insert id="insertSelective" parameterType="routeDetail" >
    insert into <include refid="table_name" /> 
    <trim prefix="(" suffix=")" suffixOverrides="," >
      id,
      <if test="routeId != null" >
        route_id,
      </if>
      <if test="routeStatus != null" >
        route_status,
      </if>
      <if test="startTime != null" >
        start_time,
      </if>
      <if test="endTime != null" >
        end_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      #{id,jdbcType=INTEGER},
      <if test="routeId != null" >
        #{routeId,jdbcType=INTEGER},
      </if>
      <if test="routeStatus != null" >
        #{routeStatus,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null" >
        #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null" >
        #{endTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="routeDetail" >
    update <include refid="table_name" />
    <set>
     <if test="routeId != null" >
        route_id=#{routeId,jdbcType=INTEGER},
      </if>
      <if test="routeStatus != null" >
        route_status = #{routeStatus,jdbcType=VARCHAR},
      </if>
      <if test="startTime != null" >
        start_time = #{startTime,jdbcType=TIMESTAMP},
      </if>
      <if test="endTime != null" >
        end_time = #{endTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>    
</mapper>